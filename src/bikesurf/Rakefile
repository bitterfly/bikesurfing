# Use require with path relative to /lib
$LOAD_PATH.unshift('./lib').uniq!

require 'bikesurf/database/dummy_data'
require 'rubocop/rake_task'

RuboCop::RakeTask.new(:rubocop)

namespace :database do
  task :migrate do
    DataMapper.auto_migrate!
    DataMapper.auto_upgrade!
    puts 'Recreating database'
  end

  task :fill_dummy do
    DataMapper.auto_migrate!
    DataMapper.auto_upgrade!

    puts 'Database dropped and created'

    Bikesurf::Database::DummyData.new.fill_dummy_data

    puts 'Database filled'
  end
end

task :serve do
  `rackup -p 1234 -s thin`
end

task default: [:rubocop]
